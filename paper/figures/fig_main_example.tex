% ============================================================================
%  Main pipeline example figure â€” five-panel overview of stages I & II
%
%  Generated by: scripts/generate_paper_main_figure.py
%  Prerequisite: run the script to produce figures/generated/main_pipeline.pdf
% ============================================================================
\begin{figure*}[t]
    \centering
    \includegraphics[width=\textwidth]{figures/generated/main_pipeline.pdf}
    \caption{End-to-end pipeline demonstration on a page from the
    \emph{Ying huan zhi lue} (1848).
    \textbf{(a)}~Input scan.
    \textbf{(b)}~Character extraction: CRAFT detection, watershed segmentation,
    binarisation, Mahalanobis assignment, and post-filtering yield individual
    character bounding boxes.
    \textbf{(c)}~Layout analysis identifies text columns (coloured overlays)
    and assigns a right-to-left, top-to-bottom reading order.
    \textbf{(d)}~Subcolumn crops are fed to the Kraken OCR model; predictions
    are matched to CRAFT detections via the Hungarian algorithm on vertical
    distances.
    \textbf{(e)}~Final alignment: OCR predictions are compared against the
    transcription via Levenshtein edit operations.
    Green~=~match, orange~=~OCR differs from transcription,
    blue~=~OCR only (no transcription available), grey~=~unknown.}
    \label{fig:main-example}
\end{figure*}
