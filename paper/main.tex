% ============================================================================
%  Main document — Reverse Typography in Historical Prints via A Contrario Matching
%
%  ICDAR / Springer LNCS format
%  Compile with: pdflatex main.tex  (twice for references)
% ============================================================================
\documentclass[runningheads]{llncs}

% ── Encoding & Fonts ──
\usepackage[T1]{fontenc}

% ── Math ──
\usepackage{amsmath, amssymb, amsfonts}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

% ── Graphics ──
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{subcaption}

% ── TikZ ──
\usepackage{tikz}
\usetikzlibrary{
    arrows.meta,
    positioning,
    shapes.geometric,
    shapes.misc,
    calc,
    fit,
    backgrounds,
    decorations.pathreplacing,
}

% ── Tables ──
\usepackage{booktabs}
\usepackage{multirow}

% ── Algorithms ──
\usepackage[ruled, vlined, linesnumbered]{algorithm2e}

% ── Hyperlinks ──
\usepackage[colorlinks=true, linkcolor=blue!60!black, citecolor=green!50!black, urlcolor=blue!70]{hyperref}

% ── Misc ──
\usepackage{enumitem}


% ============================================================================
\title{%
    Reverse Typography in Historical Prints
    via A Contrario Character Matching%
}
\titlerunning{Reverse Typography via A Contrario Matching}

\author{Anonymous Author(s)}
\authorrunning{Anonymous}
\institute{Anonymous Institution}

\begin{document}
\maketitle

% ============================================================================
%  Abstract
% ============================================================================
\begin{abstract}
The history of Chinese printing dates back to the 8th century.
Whether using carved woodblocks or movable types---techniques that coexisted for over a millennium---craftsmen imitated character models painted by a calligrapher.
The resulting printed characters vary with the regularity of craftsmanship, quality of paper and ink, and centuries of document ageing.
We address the problem of \emph{reverse typography}: reconstructing faithful vectorised versions of the characters present in a given historical printed book, producing a glossary that respects the original calligraphy.
Our fully unsupervised pipeline leverages three key techniques:
(i)~CRAFT, a learned text detector for reliable character-level extraction;
(ii)~affine scale-space smoothing~\cite{alvarez1993axioms,ciomaga2017curvature}, an affine-invariant geometric partial differential equation that restores character shapes to clean vector outlines;
and (iii)~an \emph{a~contrario} statistical framework~\cite{desolneux2000meaningful} that determines whether two character images depict the same glyph without manual threshold tuning.
Similar characters are connected in a graph partitioned by the Leiden algorithm, followed by a refinement pipeline fusing visual and linguistic signals.
The method is demonstrated on the \emph{Ying huan zhi lue} (Brief Records of the World), a famous 1848 Chinese book printed from carved woodblocks in which each character was uniquely engraved, and evidence is given that the approach generalises to other historical printed books.

\keywords{Reverse typography \and Historical document analysis \and Character clustering \and A contrario methods \and Affine scale-space}
\end{abstract}


% ============================================================================
%  1. Introduction
% ============================================================================
\section{Introduction}
\label{sec:introduction}

The history of Chinese printing spans more than twelve centuries.
Woodblock printing appeared in the 8th century: entire pages were carved in reverse on wood planks or ceramic plates, inked, and pressed onto paper.
Movable-type printing, invented by Bi Sheng around~1040, allowed individual characters to be cast in ceramic, wood, or metal and assembled into pages.
Both technologies coexisted for more than a thousand years, each producing distinct patterns of character variation.
In every case, craftsmen carving wood or moulding metal imitated character models painted by a calligrapher.
The variability of printed characters therefore depends on the regularity of craftsmanship, quality of paper and ink, and centuries of document ageing.

\emph{Reverse typography} addresses the inverse problem: given a historical printed book, reconstruct faithful vectorised versions of the character models used to produce it.
The goal is to automatically generate a \emph{character glossary}---an inventory of all distinct character forms, each represented as a clean vector outline respecting the original calligraphy.
Such a glossary enables digital preservation, palaeographic study of printing workshops, font reconstruction, and cross-document comparison of printing traditions.
Modern OCR systems, trained on millions of annotated examples, adapt poorly to historical prints due to degraded ink, irregular spacing, archaic character variants, and the absence of labelled training data.
A fully unsupervised approach is therefore required.

Our pipeline leverages three key techniques:
\begin{enumerate}[nosep]
    \item \textbf{CRAFT}~\cite{baek2019character}, a learned text detector that provides reliable character-level extraction without fine-tuning;
    \item \textbf{Affine scale-space vectorisation}~\cite{alvarez1993axioms,ciomaga2017curvature}, an affine-invariant geometric PDE that smooths character boundaries into clean vector outlines while preserving their essential shape;
    \item \textbf{A contrario matching}~\cite{desolneux2000meaningful}, a statistical framework providing a principled, adaptive test for whether two character images depict the same glyph.
\end{enumerate}
Characters deemed similar are connected in a graph partitioned by the Leiden community detection algorithm~\cite{traag2019louvain}, and a composable refinement pipeline fusing visual registration and linguistic signals produces the final clusters from which the glossary is assembled.

We demonstrate the method on the \emph{Ying huan zhi lue} (Brief Records of the World), a famous 1848 Chinese book by Xu Jiyu, printed from individually carved woodblocks.
In this book, every character occurrence was uniquely engraved---a maximally challenging scenario for clustering, since no two instances of the same character share the same printing block.
We provide evidence that the method adapts to other historical printed books.

The paper is organised as follows.
Section~\ref{sec:methodology} describes the pipeline.
Section~\ref{sec:proposed-methods} outlines proposed extensions.
Section~\ref{sec:experiments} details the evaluation protocol.
Section~\ref{sec:conclusion} concludes.


% ============================================================================
%  2. Methodology (baseline pipeline)
% ============================================================================
\input{methodology}


% ============================================================================
%  3. Proposed Extensions
% ============================================================================
\input{proposed_methods}


% ============================================================================
%  4. Experiments
% ============================================================================
\input{experiments}


% ============================================================================
%  5. Conclusion
% ============================================================================
\section{Conclusion}
\label{sec:conclusion}

We have presented a fully unsupervised pipeline for \emph{reverse typography}: the automatic reconstruction of a vectorised character glossary from historical printed books, respecting the original calligraphy.
The method combines CRAFT text detection, affine scale-space vectorisation, \textit{a contrario} statistical matching, Leiden community detection, and a composable three-stage refinement pipeline.
Demonstrated on the \emph{Ying huan zhi lue}, an 1848 Chinese book in which every character was uniquely carved from woodblocks, the pipeline handles the full variability of historical printing without any annotated training data.
The extensions outlined in Section~\ref{sec:proposed-methods}---alternative clustering strategies, principled refinement, registration-based template computation, and deformation-invariant features---provide directions for further improving the glossary quality.
Future work will focus on cross-corpus generalisation and systematic comparison of these extensions through the ablation framework described in Section~\ref{sec:experiments}.


% ============================================================================
%  References
% ============================================================================
\bibliographystyle{splncs04}
% \bibliography{references}  % uncomment when references.bib is available

% ── Inline references for standalone compilation ──
\begin{thebibliography}{18}

\bibitem{baek2019character}
Baek, Y., Lee, B., Han, D., Yun, S., Lee, H.:
Character region awareness for text detection.
In: Proc.\ IEEE/CVF CVPR, pp.~9365--9374 (2019)

\bibitem{dalal2005histograms}
Dalal, N., Triggs, B.:
Histograms of oriented gradients for human detection.
In: Proc.\ IEEE CVPR, vol.~1, pp.~886--893 (2005)

\bibitem{desolneux2000meaningful}
Desolneux, A., Moisan, L., Morel, J.-M.:
Meaningful alignments.
Int.\ J.\ Comput.\ Vis.\ \textbf{40}(1), 7--23 (2000)

\bibitem{alvarez1993axioms}
Alvarez, L., Guichard, F., Lions, P.-L., Morel, J.-M.:
Axioms and fundamental equations of image processing.
Archive for Rational Mechanics and Analysis \textbf{123}(3), 199--257 (1993)

\bibitem{ciomaga2017curvature}
Ciomaga, A., Monasse, P., Morel, J.-M.:
The image curvature microscope: Accurate curvature computation at subpixel resolution.
Image Processing On Line (IPOL) \textbf{7}, 197--217 (2017)

\bibitem{briand2018ipol}
Briand, T., Facciolo, G., S\'anchez, J.:
A detailed study of the modified inverse compositional algorithm.
Image Processing On Line (IPOL) \textbf{8}, 311--364 (2018)

\bibitem{traag2019louvain}
Traag, V.A., Waltman, L., van Eck, N.J.:
From {Louvain} to {Leiden}: guaranteeing well-connected communities.
Scientific Reports \textbf{9}(1), 5233 (2019)

\bibitem{von2010lsd}
Grompone~von~Gioi, R., Jakubowicz, J., Morel, J.-M., Randall, G.:
{LSD}: a line segment detector.
Image Processing On Line (IPOL) \textbf{2}, 35--55 (2012)

\bibitem{kiessling2019kraken}
Kiessling, B.:
Kraken --- an universal text recognizer for the humanities.
In: Proc.\ Digital Humanities (2019)

\bibitem{hubert1985comparing}
Hubert, L., Arabie, P.:
Comparing partitions.
J.\ Classification \textbf{2}(1), 193--218 (1985)

\bibitem{rosenberg2007v}
Rosenberg, A., Hirschberg, J.:
V-measure: A conditional entropy-based external cluster evaluation measure.
In: Proc.\ EMNLP-CoNLL, pp.~410--420 (2007)

\bibitem{rony2025hausdorff}
Rony, J., Kervadec, H.:
Distorch: fast differentiable boundary distances.
In: Proc.\ MIDL (2025)

\bibitem{frey2007clustering}
Frey, B.J., Dueck, D.:
Clustering by passing messages between data points.
Science \textbf{315}(5814), 972--976 (2007)

\bibitem{mcinneshdbscan2017}
McInnes, L., Healy, J., Astels, S.:
hdbscan: Hierarchical density based clustering.
J.\ Open Source Software \textbf{2}(11), 205 (2017)

\bibitem{belongie2002shape}
Belongie, S., Malik, J., Puzicha, J.:
Shape matching and object recognition using shape contexts.
IEEE Trans.\ PAMI \textbf{24}(4), 509--522 (2002)

\bibitem{edelsbrunner2008persistent}
Edelsbrunner, H., Harer, J.:
Persistent homology---a survey.
In: Surveys on Discrete and Computational Geometry, pp.~257--282. AMS (2008)

\bibitem{learned2004data}
Learned-Miller, E.:
Data driven image models through continuous joint alignment.
IEEE Trans.\ PAMI \textbf{28}(2), 236--250 (2006)

\bibitem{yedidia2003understanding}
Yedidia, J.S., Freeman, W.T., Weiss, Y.:
Understanding belief propagation and its generalizations.
In: Exploring AI in the New Millennium, pp.~239--269 (2003)

\end{thebibliography}

\end{document}
