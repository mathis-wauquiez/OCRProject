% ============================================================================
%  Main document — Reverse Typography in Historical Prints via A Contrario Matching
%
%  ICDAR / Springer LNCS format
%  Compile with: pdflatex main.tex  (twice for references)
% ============================================================================
\documentclass[runningheads]{llncs}

% ── Encoding & Fonts ──
\usepackage[T1]{fontenc}

% ── Math ──
\usepackage{amsmath, amssymb, amsfonts}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

% ── Graphics ──
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{subcaption}

% ── TikZ ──
\usepackage{tikz}
\usetikzlibrary{
    arrows.meta,
    positioning,
    shapes.geometric,
    shapes.misc,
    calc,
    fit,
    backgrounds,
    decorations.pathreplacing,
}

% ── Tables ──
\usepackage{booktabs}
\usepackage{multirow}

% ── Algorithms ──
\usepackage[ruled, vlined, linesnumbered]{algorithm2e}

% ── Hyperlinks ──
\usepackage[colorlinks=true, linkcolor=blue!60!black, citecolor=green!50!black, urlcolor=blue!70]{hyperref}

% ── Misc ──
\usepackage[inline]{enumitem}

% ── Auto-generated experiment macros ──
% Generated by: scripts/figure_generation/generate_experiment_figures.py
% Uncomment once generated/experiment_macros.tex exists:
% \input{figures/generated/experiment_macros}
%
% Fallback definitions (used until the real macros are generated):
\providecommand{\nPatches}{13{,}500}
\providecommand{\nPages}{40}
\providecommand{\nNodes}{13{,}500}
\providecommand{\nEdges}{200{,}000}
\providecommand{\graphDensity}{0.0022}
\providecommand{\avgDegree}{29.6}
\providecommand{\nComponents}{---}
\providecommand{\nIsolated}{---}
\providecommand{\nClustersBaseline}{---}
\providecommand{\ARIBaseline}{---}
\providecommand{\NMIBaseline}{---}
\providecommand{\VmeasureBaseline}{---}
\providecommand{\PurityBaseline}{---}
\providecommand{\AccuracyBaseline}{---}
\providecommand{\nClustersFinal}{---}
\providecommand{\ARIFinal}{---}
\providecommand{\NMIFinal}{---}
\providecommand{\VmeasureFinal}{---}
\providecommand{\PurityFinal}{---}
\providecommand{\AccuracyFinal}{---}
\providecommand{\ARIocr}{---}
\providecommand{\NMIocr}{---}
\providecommand{\Vmeasureocr}{---}
\providecommand{\Purityocr}{---}
\providecommand{\nGlossaryEntries}{---}

% ── Figure path shortcuts ──
% Stage I: Extraction
\newcommand{\figMainPipeline}{figures/generated/main_pipeline.pdf}
\newcommand{\figExtractionSeg}{figures/generated/extraction_segmentation.pdf}
\newcommand{\figCraftDeletion}{figures/generated/craft_deletion.pdf}
\newcommand{\figLayoutAnalysis}{figures/generated/layout_analysis.pdf}
% Stage II: Preprocessing
\newcommand{\figPreprocessing}{figures/generated/preprocessing.pdf}
\newcommand{\figHogDescriptor}{figures/generated/hog_descriptor.pdf}
% Stage III: Matching & clustering
\newcommand{\figAContrario}{figures/generated/a_contrario.pdf}
\newcommand{\figClusterGallery}{figures/generated/cluster_gallery.pdf}
\newcommand{\figTsneA}{figures/generated/tsne_clusters/tsne_cluster_A.pdf}
\newcommand{\figTsneB}{figures/generated/tsne_clusters/tsne_cluster_B.pdf}
\newcommand{\figTsneC}{figures/generated/tsne_clusters/tsne_cluster_C.pdf}
\newcommand{\figTsneD}{figures/generated/tsne_clusters/tsne_cluster_D.pdf}
% Stage IV: Refinement & glossary
\newcommand{\figCharCatalogue}{figures/generated/character_catalogue.pdf}
\newcommand{\figGlossary}{figures/generated/glossary.pdf}
\newcommand{\figGlossaryLeast}{figures/generated/glossary_least_frequent.pdf}
\newcommand{\figGlossaryIntermediate}{figures/generated/glossary_intermediate.pdf}
% Experiments
\newcommand{\figEpsilonSensitivity}{figures/generated/epsilon_sensitivity.pdf}
\newcommand{\figSplitThreshold}{figures/generated/split_threshold.pdf}
\newcommand{\figDiscrepancy}{figures/generated/discrepancy.pdf}
\newcommand{\figAlignmentViz}{figures/generated/alignment_viz.pdf}
\newcommand{\figAblationPartition}{figures/generated/ablation_a2_partition_type.pdf}
\newcommand{\figAblationReciprocal}{figures/generated/ablation_a4_reciprocal.pdf}

% ============================================================================
\title{%
    Reverse Typography in Historical Prints
    via A Contrario Character Matching%
}
\titlerunning{Reverse Typography via A Contrario Matching}

\author{First Author\inst{1}\orcidID{0000-1111-2222-3333} \and
Second Author\inst{2,3}\orcidID{1111-2222-3333-4444} \and
Third Author\inst{3}\orcidID{2222--3333-4444-5555}}
\authorrunning{F. Author et al.}

\institute{Princeton University, Princeton NJ 08544, USA \and
Springer Heidelberg, Tiergartenstr. 17, 69121 Heidelberg, Germany
\email{lncs@springer.com}\\
\url{http://www.springer.com/gp/computer-science/lncs} \and
ABC Institute, Rupert-Karls-University Heidelberg, Heidelberg, Germany\\
\email{\{abc,lncs\}@uni-heidelberg.de}}

\begin{document}
\maketitle

% ============================================================================
%  Abstract
% ============================================================================
\begin{abstract}
The history of Chinese printing dates back to the 8th century.
Whether using carved woodblocks or movable types---techniques that coexisted for over a millennium---craftsmen imitated character models painted by a calligrapher.
The resulting printed characters vary with the regularity of craftsmanship, quality of paper and ink, and centuries of document ageing.
We address the problem of \emph{reverse typography}: reconstructing faithful vectorised versions of the characters present in a given historical printed book, producing a glossary that respects the original calligraphy.
Our fully unsupervised pipeline leverages three key techniques:
(i)~CRAFT, a learned text detector for reliable character-level extraction;
(ii)~affine scale-space smoothing~\cite{alvarez1993axioms,ciomaga2017curvature}, an affine-invariant geometric partial differential equation that restores character shapes to clean vector outlines;
and (iii)~an \emph{a~contrario} statistical framework~\cite{desolneux2000meaningful} that determines whether two character images depict the same glyph without manual threshold tuning.
Similar characters are connected in a graph partitioned by the Leiden algorithm, followed by a refinement pipeline fusing visual and linguistic signals.
The method is demonstrated on the \emph{Ying huan zhi lue} (Brief Records of the World), a famous 1848 Chinese book printed from carved woodblocks in which each character was uniquely engraved, and evidence is given that the approach generalises to other historical printed books.

\keywords{Reverse typography \and Historical document analysis \and Character clustering \and A contrario methods \and Affine scale-space}
\end{abstract}


% ============================================================================
%  1. Introduction
% ============================================================================
\input{sections/introduction}

% ============================================================================
%  2. Methodology
% ============================================================================
\input{sections/methodology}

% ============================================================================
%  3. Experiments
% ============================================================================
\input{sections/experiments}

% ============================================================================
%  4. Conclusion
% ============================================================================
\input{sections/conclusion}


% ============================================================================
%  References
% ============================================================================
\bibliographystyle{splncs04}
% \bibliography{references}  % uncomment when references.bib is available

% ── Inline references for standalone compilation ──
\begin{thebibliography}{20}

\bibitem{baek2019character}
Baek, Y., Lee, B., Han, D., Yun, S., Lee, H.:
Character region awareness for text detection.
In: Proc.\ IEEE/CVF CVPR, pp.~9365--9374 (2019)

\bibitem{dalal2005histograms}
Dalal, N., Triggs, B.:
Histograms of oriented gradients for human detection.
In: Proc.\ IEEE CVPR, vol.~1, pp.~886--893 (2005)

\bibitem{desolneux2000meaningful}
Desolneux, A., Moisan, L., Morel, J.-M.:
Meaningful alignments.
Int.\ J.\ Comput.\ Vis.\ \textbf{40}(1), 7--23 (2000)

\bibitem{alvarez1993axioms}
Alvarez, L., Guichard, F., Lions, P.-L., Morel, J.-M.:
Axioms and fundamental equations of image processing.
Archive for Rational Mechanics and Analysis \textbf{123}(3), 199--257 (1993)

\bibitem{ciomaga2017curvature}
Ciomaga, A., Monasse, P., Morel, J.-M.:
The image curvature microscope: Accurate curvature computation at subpixel resolution.
Image Processing On Line (IPOL) \textbf{7}, 197--217 (2017)

\bibitem{briand2018ipol}
Briand, T., Facciolo, G., S\'anchez, J.:
A detailed study of the modified inverse compositional algorithm.
Image Processing On Line (IPOL) \textbf{8}, 311--364 (2018)

\bibitem{traag2019louvain}
Traag, V.A., Waltman, L., van Eck, N.J.:
From {Louvain} to {Leiden}: guaranteeing well-connected communities.
Scientific Reports \textbf{9}(1), 5233 (2019)

\bibitem{von2010lsd}
Grompone~von~Gioi, R., Jakubowicz, J., Morel, J.-M., Randall, G.:
{LSD}: a line segment detector.
Image Processing On Line (IPOL) \textbf{2}, 35--55 (2012)

\bibitem{kiessling2019kraken}
Kiessling, B.:
Kraken --- an universal text recognizer for the humanities.
In: Proc.\ Digital Humanities (2019)

\bibitem{hubert1985comparing}
Hubert, L., Arabie, P.:
Comparing partitions.
J.\ Classification \textbf{2}(1), 193--218 (1985)

\bibitem{rosenberg2007v}
Rosenberg, A., Hirschberg, J.:
V-measure: A conditional entropy-based external cluster evaluation measure.
In: Proc.\ EMNLP-CoNLL, pp.~410--420 (2007)

\bibitem{rony2025hausdorff}
Rony, J., Kervadec, H.:
Distorch: fast differentiable boundary distances.
In: Proc.\ MIDL (2025)

\bibitem{bansal2004correlation}
Bansal, N., Blum, A., Chawla, S.:
Correlation clustering.
Machine Learning \textbf{56}(1--3), 89--113 (2004)

\bibitem{veldt2018correlation}
Veldt, N., Gleich, D.F., Wirth, A.:
A correlation clustering framework for community detection.
In: Proc.\ WWW, pp.~439--448 (2018)

\bibitem{traag2011narrow}
Traag, V.A., Van~Dooren, P., Nesterov, Y.:
Narrow scope for resolution-limit-free community detection.
Physical Review E \textbf{84}(1), 016114 (2011)

\bibitem{reichardt2006statistical}
Reichardt, J., Bornholdt, S.:
Statistical mechanics of community detection.
Physical Review E \textbf{74}(1), 016110 (2006)

\bibitem{fortunato2007resolution}
Fortunato, S., Barth\'elemy, M.:
Resolution limit in community detection.
Proc.\ National Academy of Sciences \textbf{104}(1), 36--41 (2007)

\bibitem{frey2007clustering}
Frey, B.J., Dueck, D.:
Clustering by passing messages between data points.
Science \textbf{315}(5814), 972--976 (2007)

\bibitem{mcinneshdbscan2017}
McInnes, L., Healy, J., Astels, S.:
hdbscan: Hierarchical density based clustering.
J.\ Open Source Software \textbf{2}(11), 205 (2017)

\bibitem{belongie2002shape}
Belongie, S., Malik, J., Puzicha, J.:
Shape matching and object recognition using shape contexts.
IEEE Trans.\ PAMI \textbf{24}(4), 509--522 (2002)

\bibitem{edelsbrunner2008persistent}
Edelsbrunner, H., Harer, J.:
Persistent homology---a survey.
In: Surveys on Discrete and Computational Geometry, pp.~257--282. AMS (2008)

\bibitem{learned2004data}
Learned-Miller, E.:
Data driven image models through continuous joint alignment.
IEEE Trans.\ PAMI \textbf{28}(2), 236--250 (2006)

\bibitem{yedidia2003understanding}
Yedidia, J.S., Freeman, W.T., Weiss, Y.:
Understanding belief propagation and its generalizations.
In: Exploring AI in the New Millennium, pp.~239--269 (2003)

\bibitem{rabin2008cemd}
Rabin, J., Delon, J., Gousseau, Y.:
Circular {Earth Mover's Distance} for the comparison of local features.
In: Proc.\ ICPR, pp.~1--4 (2008)

\bibitem{delon2011transportation}
Delon, J., Rabin, J., Gousseau, Y.:
Transportation distances on the circle.
J.\ Math.\ Imaging Vis.\ \textbf{41}(1--2), 147--167 (2011)

\end{thebibliography}

\end{document}
