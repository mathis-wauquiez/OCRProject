# Hydra Configuration for Graph Clustering Sweep
# === Hydra ===
hydra:
  run:
    dir: .hydra_outputs/clustering/${now:%Y-%m-%d_%H-%M-%S}

# Data paths
data:
  # input_path: "outputs/processed_test"
  target_lbl: "char_chat"
  # output_path: "outputs/clustering_results"
  input_path: "outputs/processed_patches_book1complete"
  output_path: "outputs/clustering_results_full"

  
# Clustering method
method:
  feature: "histogram"
  edges_type: "nlfa"
  metric: "CEMD"
  keep_reciprocal: true
  device: "cuda"
  
  # Parameter sweep ranges

  # cell_sizes: [16, 24, 32]  # Cell size for HOG computation
  # grdt_sigmas: [5]       # Gradient sigma for smoothing
  # nums_bins: [8, 16]        # Number of orientation bins

  # epsilons: [0.00025, 0.00038, .0005]
  epsilons: [0.0005]
  # gammas: [1.0, 1.25]
  gammas: [1.0]
  
  cell_sizes: [22]  # Cell size for HOG computation
  # cell_sizes: [48]  # Cell size for HOG computation
  normalization_methods : ['patch'] # patch >> all
  grdt_sigmas: [5]       # Gradient sigma for smoothing
  nums_bins: [16]        # Number of orientation bins


  # ── Cluster splitting (hierarchical sub-clustering) ──
  split_thresholds: [21.5] # Hausdorff distance threshold for cutting the dendrogram
  split_linkage_method: "average" # scipy linkage method: average, complete, single, ward, ...
  split_min_cluster_size: 5       # clusters smaller than this are not split
  split_batch_size: 256           # batch size for Hausdorff distance computation
  split_render_scale: 1         # SVG render scale for binary image distance

  # ── Reporting options ──
  embed_images: true       # true: base64-embedded images; false: external files
  image_dpi: 75            # DPI for saved figures
  use_jpeg: false          # use JPEG instead of PNG (smaller files, lossy)
  jpeg_quality: 70         # JPEG quality (1–100)
